
<!DOCTYPE html>
<html>
<head>
  <title> Paypal integration with Auth0 Rules </title>

</head>

<body>

<script type="text/javascript">
    var url = new URL(window.location.href);
    var paypalUrl = url.searchParams.get("paypal_url");

    if (paypalUrl) // redirect to paypal
    {
        var state = url.searchParams.get("state");
        
        window.sessionStorage.setItem("auth0_paypal_state", state);
        window.location.href = paypalUrl;
    }
    else { // are we coming back from paypal?
        
        var url = new URL(window.location.href);
        var paymentid = url.searchParams.get("paymentId");
        var returnState = window.sessionStorage.getItem("auth0_paypal_state");
        
        window.sessionStorage.removeItem("auth0_paypal_state");
        window.location.href = "https://auth.algorox.com/continue?state=" + returnState + '&' + 'paymentId=' + paymentid;
    }

    </script>

</body>
</html>